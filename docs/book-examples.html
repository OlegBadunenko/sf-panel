<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>xtsf Illustration • StataSFpanel</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css"><script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet"><script src="pkgdown.js"></script><meta property="og:title" content="xtsf Illustration"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-title-body">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">StataSFpanel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="book-examples.html">User Guide</a>
</li>
<li>
  <a href="news/index.html">News/Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>xtsf Illustration</h1>
    </div>


<div id="xtsf-illustration" class="section level1">

<p>In this article, the functionality In this article, the functionality of the command <strong>xtsf</strong> is showcased. The subset of the PWT V10 data is used:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">use</span> ../../pwt10_sbsmpl, <span class="kw">clear</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="define-specifications">Define specifications<a class="anchor" aria-label="anchor" href="#define-specifications"></a></h1>
<p>Here are the specifications of the translog and Cobb-Douglas production functions.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">global</span> spePWTCD <span class="st">"lnY lnK lnHL"</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="kw">global</span> spePWTTL <span class="st">"lnY (c.lnK c.lnHL)##(c.lnK c.lnHL)"</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="kw">global</span> CSyear 2000</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="kw">global</span> itermax = 1000</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="translog-specification">Translog specification<a class="anchor" aria-label="anchor" href="#translog-specification"></a></h1>
<div class="section level2">
<h2 id="attempt-1">Attempt 1<a class="anchor" aria-label="anchor" href="#attempt-1"></a></h2>
<p><code>xtsf</code> fits the 4-components estimator of the stochastic frontier model for panel data. It allows using factor variables (see <code>fvvarlist</code>). Unbalanced panels are supported.</p>
<p>The options <code>initscaf</code> (scaling factor of the OLS estimates for the <em>frontier</em> starting values), <code>initscau</code> (scaling factor of the initial value of the variance of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi><annotation encoding="application/x-tex">u</annotation></semantics></math>), and <code>initscav</code> (scaling factor of the initial value of the variance of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math>) should be kept at their default values, but varying them may help convergence. The option <code>haltonbase</code> defines the base for the Halton draws for the noise term for the first observation. The option <code>basesapart</code> governs how many primes apart the draws for the inefficiency term lie. Even with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mn>199</mn></mrow><annotation encoding="application/x-tex">R=199</annotation></semantics></math> the estimation is computer intensive</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">clear</span> 41</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">on</span> 41</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>xtsf <span class="ot">$spePWTTL</span> <span class="kw">if</span> sample_panel, simtype(halton) haltonbase(3) basesapart(2) <span class="kw">technique</span>(<span class="kw">nr</span>) <span class="fu">r</span>(199) iter(102) <span class="kw">model</span>(gtreMSLE) initscaf(0.99) initscau(0.5) initscav(0.25)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">off</span> 41</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>...</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>iter 102: Simulated <span class="fu">log</span>-likelihood =  881.46667  (<span class="kw">not</span> concave)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>convergence <span class="kw">not</span> achieved</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>Sample:----------------------</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a> Number <span class="kw">of</span> <span class="kw">obs</span>    = 750</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a> Number <span class="kw">of</span> groups = 38</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>Diagnostics:-----------------</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a> Simulated logL   = 881.4667       </span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>-----------------------------</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a> The 4-components estimator <span class="kw">of</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a> the production stochastic <span class="kw">frontier</span> <span class="kw">model</span> <span class="kw">for</span> panel <span class="kw">data</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>-------------------------------------------------------------------------------</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>          lnY | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>          lnK |   2.805423   .0034264   818.76   0.000     2.798707    2.812139</span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>         lnHL |  -1.151636          .        .       .            .           .</span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>              |</span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a>  c.lnK#c.lnK |  -.1008305   .0000526 -1915.58   0.000    -.1009337   -.1007274</span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>              |</span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a> c.lnK#c.lnHL |     .14631   .0003042   480.91   0.000     .1457137    .1469063</span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a>              |</span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a>c.lnHL#c.lnHL |  -.0534775   .0007695   -69.49   0.000    -.0549857   -.0519693</span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a>              |</span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a>        <span class="dt">_cons</span> |  -8.854076          .        .       .            .           .</span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(vi)]   |</span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a>        <span class="dt">_cons</span> |  -3.330546    .076926   -43.30   0.000    -3.481318   -3.179774</span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(ui)]   |</span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a>        <span class="dt">_cons</span> |  -7.939136   1.293957    -6.14   0.000    -10.47525   -5.403027</span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(vit)]  |</span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a>        <span class="dt">_cons</span> |  -5.471688   .0952354   -57.45   0.000    -5.658346    -5.28503</span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(uit)]  |</span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a>        <span class="dt">_cons</span> |  -9.757716   16.45169    -0.59   0.553    -42.00244    22.48701</span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a>-------------------------------------------------------------------------------</span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">clear</span> 1</span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a></span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">on</span> 1</span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a>. <span class="kw">timer</span> <span class="ot">list</span> 41</span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a>  41:    264.93 /        1 =     264.9260</span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a>. <span class="kw">display</span> <span class="fu">r</span>(t41)/60 <span class="st">" minutes"</span></span>
<span id="cb3-54"><a href="#cb3-54" tabindex="-1"></a>4.4154333 minutes</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="attempt-2">Attempt 2<a class="anchor" aria-label="anchor" href="#attempt-2"></a></h2>
<p>We can try different scaling value for the variance of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi><annotation encoding="application/x-tex">u</annotation></semantics></math> (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.5</mn><annotation encoding="application/x-tex">0.5</annotation></semantics></math> to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0.25</mn><annotation encoding="application/x-tex">0.25</annotation></semantics></math>) and increase the number of permitted iterations to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1020</mn><annotation encoding="application/x-tex">1020</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">clear</span> 42</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">on</span> 42</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>xtsf <span class="ot">$spePWTTL</span> <span class="kw">if</span> sample_panel, simtype(halton) haltonbase(3) basesapart(2) <span class="kw">technique</span>(<span class="kw">nr</span>) <span class="fu">r</span>(199) iter(1020) <span class="kw">model</span>(gtreMSLE) initscaf(0.99) initscau(0.25) initscav(0.25)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">off</span> 42</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>...</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>iter 1017: Simulated <span class="fu">log</span>-likelihood =  813.69897  (<span class="kw">not</span> concave)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>iter 1018: Simulated <span class="fu">log</span>-likelihood =  813.69929  (<span class="kw">not</span> concave)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>iter 1019: Simulated <span class="fu">log</span>-likelihood =  813.69961  (<span class="kw">not</span> concave)</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>iter 1020: Simulated <span class="fu">log</span>-likelihood =  813.69992  (<span class="kw">not</span> concave)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>convergence <span class="kw">not</span> achieved</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>Sample:----------------------</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a> Number <span class="kw">of</span> <span class="kw">obs</span>    = 750</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a> Number <span class="kw">of</span> groups = 38</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>Diagnostics:-----------------</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a> Simulated logL   = 813.6999       </span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>-----------------------------</span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a> The 4-components estimator <span class="kw">of</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a> the production stochastic <span class="kw">frontier</span> <span class="kw">model</span> <span class="kw">for</span> panel <span class="kw">data</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>-------------------------------------------------------------------------------</span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>          lnY | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]</span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a>          lnK |   2.793017   .0018322  1524.39   0.000     2.789426    2.796608</span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a>         lnHL |  -1.125678   .0232385   -48.44   0.000    -1.171225   -1.080131</span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a>              |</span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a>  c.lnK#c.lnK |  -.1003921   .0000654 -1535.14   0.000    -.1005203   -.1002639</span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a>              |</span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a> c.lnK#c.lnHL |   .1448535   .0004709   307.64   0.000     .1439307    .1457764</span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a>              |</span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a>c.lnHL#c.lnHL |  -.0425306   .0025249   -16.84   0.000    -.0474793    -.037582</span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a>              |</span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a>        <span class="dt">_cons</span> |  -9.393699          .        .       .            .           .</span>
<span id="cb4-37"><a href="#cb4-37" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb4-38"><a href="#cb4-38" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(vi)]   |</span>
<span id="cb4-39"><a href="#cb4-39" tabindex="-1"></a>        <span class="dt">_cons</span> |  -1.019085   .0326685   -31.19   0.000    -1.083114   -.9550555</span>
<span id="cb4-40"><a href="#cb4-40" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb4-41"><a href="#cb4-41" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(ui)]   |</span>
<span id="cb4-42"><a href="#cb4-42" tabindex="-1"></a>        <span class="dt">_cons</span> |  -1.436433   .0690178   -20.81   0.000    -1.571705   -1.301161</span>
<span id="cb4-43"><a href="#cb4-43" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb4-44"><a href="#cb4-44" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(vit)]  |</span>
<span id="cb4-45"><a href="#cb4-45" tabindex="-1"></a>        <span class="dt">_cons</span> |  -6.182829   .1626949   -38.00   0.000    -6.501705   -5.863952</span>
<span id="cb4-46"><a href="#cb4-46" tabindex="-1"></a>--------------+----------------------------------------------------------------</span>
<span id="cb4-47"><a href="#cb4-47" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(uit)]  |</span>
<span id="cb4-48"><a href="#cb4-48" tabindex="-1"></a>        <span class="dt">_cons</span> |  -5.000942   .1657858   -30.17   0.000    -5.325876   -4.676008</span>
<span id="cb4-49"><a href="#cb4-49" tabindex="-1"></a>-------------------------------------------------------------------------------</span>
<span id="cb4-50"><a href="#cb4-50" tabindex="-1"></a>\<span class="kw">end</span>{lstlisting}</span>
<span id="cb4-51"><a href="#cb4-51" tabindex="-1"></a>taking prohibitively a lot <span class="kw">of</span> time</span>
<span id="cb4-52"><a href="#cb4-52" tabindex="-1"></a>\<span class="kw">begin</span>{lstlisting}[language = stata]</span>
<span id="cb4-53"><a href="#cb4-53" tabindex="-1"></a>. <span class="kw">timer</span> <span class="ot">list</span> 42</span>
<span id="cb4-54"><a href="#cb4-54" tabindex="-1"></a>  42:   2785.68 /        1 =    2785.6850</span>
<span id="cb4-55"><a href="#cb4-55" tabindex="-1"></a>. <span class="kw">display</span> <span class="fu">r</span>(t42)/60 <span class="st">" minutes"</span></span>
<span id="cb4-56"><a href="#cb4-56" tabindex="-1"></a>46.428083 minutes</span></code></pre></div>
<p>Unfortunately the convergence is still not achieved.</p>
</div>
<div class="section level2">
<h2 id="attempt-3">Attempt 3<a class="anchor" aria-label="anchor" href="#attempt-3"></a></h2>
<p>In this choice of options</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>xtsf <span class="ot">$spePWTTL</span> <span class="kw">if</span> sample_panel, simtype(halton) haltonbase(2) basesapart(1) <span class="kw">technique</span>(<span class="kw">bfgs</span>) <span class="fu">r</span>(199) iter(102) <span class="kw">model</span>(gtreMSLE)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>\<span class="kw">end</span>{lstlisting}</span></code></pre></div>
<p>we encounter another issue: &gt; error: “could not calculate numerical derivatives – flat or discontinuous region encountered”</p>
<p>which could indicate bad initial values that led optimization into flat region.</p>
</div>
<div class="section level2">
<h2 id="attempt-4">Attempt 4<a class="anchor" aria-label="anchor" href="#attempt-4"></a></h2>
<p>Possible solution could be to find some starting values with a low <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">R</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>xtsf <span class="ot">$spePWTTL</span> <span class="kw">if</span> sample_panel, simtype(halton) haltonbase(2) basesapart(1) nthreads(10) <span class="kw">technique</span>(<span class="kw">nr</span>) <span class="fu">r</span>(199) iter(100) <span class="kw">model</span>(gtreMSLE) from(init_theta)</span></code></pre></div>
<p>This approach still does not lead to satisfactory results:</p>
<blockquote>
<p>convergence not achieved</p>
</blockquote>
</div>
</div>
<div class="section level1">
<h1 id="cobb-douglas-specification">Cobb-Douglas specification<a class="anchor" aria-label="anchor" href="#cobb-douglas-specification"></a></h1>
<p>The model seems too complex. (Hint at the possibility of no inefficiency in the PWT data once random effects are taken into account). We wish to draw attention to difficulty estimating the models involving random effects. Estimating a simpler model, the Cobb-Douglas specification is successful and quick</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">clear</span> 40</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">on</span> 40</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>xtsf <span class="ot">$spePWTCD</span> <span class="kw">if</span> sample_panel, simtype(halton) <span class="kw">technique</span>(<span class="kw">nr</span>) <span class="fu">r</span>(249) iter(102) <span class="kw">model</span>(gtreMSLE)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="kw">timer</span> <span class="kw">off</span> 40</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="kw">timer</span> <span class="ot">list</span> 40</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="kw">display</span> <span class="fu">r</span>(t40)/60 <span class="st">" minutes"</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>  The Model is MSLE</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>Log-likelihood maximization <span class="kw">using</span> optimize() </span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>iter 0:  Simulated <span class="fu">log</span>-likelihood = -493.98842  (<span class="kw">not</span> concave)</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>iter 1:  Simulated <span class="fu">log</span>-likelihood =  543.32339  (<span class="kw">not</span> concave)</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>...</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>iter 25: Simulated <span class="fu">log</span>-likelihood =  822.23872  </span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>Sample:----------------------</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a> Number <span class="kw">of</span> <span class="kw">obs</span>    = 750</span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a> Number <span class="kw">of</span> groups = 38</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>Diagnostics:-----------------</span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a> Simulated logL   = 822.2387       </span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a>-----------------------------</span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a> The 4-components estimator <span class="kw">of</span></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a> the production stochastic <span class="kw">frontier</span> <span class="kw">model</span> <span class="kw">for</span> panel <span class="kw">data</span></span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a>         lnY | Coefficient  Std. err.      z    P&gt;|z|     [95% conf. interval]</span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a>         lnK |    .355902    .005228    68.08   0.000     .3456553    .3661487</span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a>        lnHL |   .6764163   .0090621    74.64   0.000      .658655    .6941776</span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a>       <span class="dt">_cons</span> |   5.915055   .0721282    82.01   0.000     5.773686    6.056423</span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(vi)]  |</span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a>       <span class="dt">_cons</span> |  -2.707901   .1012418   -26.75   0.000    -2.906332   -2.509471</span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(ui)]  |</span>
<span id="cb7-38"><a href="#cb7-38" tabindex="-1"></a>       <span class="dt">_cons</span> |  -7.861818   1.028573    -7.64   0.000    -9.877785   -5.845851</span>
<span id="cb7-39"><a href="#cb7-39" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb7-40"><a href="#cb7-40" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(vit)] |</span>
<span id="cb7-41"><a href="#cb7-41" tabindex="-1"></a>       <span class="dt">_cons</span> |  -5.716886   .2527519   -22.62   0.000    -6.212271   -5.221502</span>
<span id="cb7-42"><a href="#cb7-42" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb7-43"><a href="#cb7-43" tabindex="-1"></a><span class="fu">ln</span>[<span class="kw">var</span>(uit)] |</span>
<span id="cb7-44"><a href="#cb7-44" tabindex="-1"></a>       <span class="dt">_cons</span> |  -5.329486   .4937253   -10.79   0.000     -6.29717   -4.361802</span>
<span id="cb7-45"><a href="#cb7-45" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb7-46"><a href="#cb7-46" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" tabindex="-1"></a></span>
<span id="cb7-48"><a href="#cb7-48" tabindex="-1"></a>. <span class="kw">timer</span> <span class="kw">off</span> 40</span>
<span id="cb7-49"><a href="#cb7-49" tabindex="-1"></a></span>
<span id="cb7-50"><a href="#cb7-50" tabindex="-1"></a>. <span class="kw">timer</span> <span class="ot">list</span> 40</span>
<span id="cb7-51"><a href="#cb7-51" tabindex="-1"></a>  40:     52.33 /        1 =      52.3260</span>
<span id="cb7-52"><a href="#cb7-52" tabindex="-1"></a></span>
<span id="cb7-53"><a href="#cb7-53" tabindex="-1"></a>. <span class="kw">display</span> <span class="fu">r</span>(t40)/60 <span class="st">" minutes"</span></span>
<span id="cb7-54"><a href="#cb7-54" tabindex="-1"></a>.8721 minutes</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="efficiencies">Efficiencies<a class="anchor" aria-label="anchor" href="#efficiencies"></a></h1>
<p>We can now obtain efficiencies from the GTRE model using the <code>predict</code> command. We start with persistent efficiency. <code>predict</code> with the <code>persistent</code> option generates efficiencies for all time periods, which is useful to calculate the overall efficiency, however if we wish to look at the summary, which need to count persistent efficiency once per country:</p>
<div class="section level2">
<h2 id="persistent-efficiency">Persistent efficiency<a class="anchor" aria-label="anchor" href="#persistent-efficiency"></a></h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">drop</span> te_pers</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="kw">predict</span> te_pers <span class="kw">if</span> sample_panel, persistent</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>* <span class="fu">last</span> <span class="fu">year</span> available</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">drop</span> year_last_available</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="kw">bysort</span> id: <span class="kw">egen</span> year_last_available = <span class="fu">max</span>(<span class="fu">year</span>) <span class="kw">if</span> sample_panel</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">drop</span> te_pers_initial</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="kw">generate</span> te_pers_initial = te_pers <span class="kw">if</span> <span class="fu">year</span> == year_last_available &amp; sample_panel</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="kw">summarize</span> te_pers_initial</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>    Variable |        Obs        Mean    Std. <span class="kw">dev</span>.       Min        Max</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>-------------+---------------------------------------------------------</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>te_pers_in~<span class="ot">l</span> |         38    .9825579    .0043489   .9717373   .9910768</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="transient-efficiency">Transient efficiency<a class="anchor" aria-label="anchor" href="#transient-efficiency"></a></h2>
<p>There is not much persistent inefficiency. This is expected from a low estimate <code>ln[var(ui)]</code> of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>−</mi><mn>7.861818</mn></mrow><annotation encoding="application/x-tex">-7.861818</annotation></semantics></math> implying <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>σ</mi><mrow><mi>u</mi><mn>0</mn><mi>i</mi></mrow><mn>2</mn></msubsup><mo>=</mo><mn>.00038</mn></mrow><annotation encoding="application/x-tex">\sigma^2_{u0i}=.00038</annotation></semantics></math>. We obtain transient efficiency estimates using the <code>predict</code> command with the <code>transient</code> option:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">drop</span> te_tran</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="kw">predict</span> te_tran <span class="kw">if</span> sample_panel, transient</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">drop</span> <span class="kw">fitted</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">predict</span> <span class="kw">fitted</span> <span class="kw">if</span> sample_panel</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="kw">summarize</span> te_pers te_tran</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>    Variable |        Obs        Mean    Std. <span class="kw">dev</span>.       Min        Max</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>-------------+---------------------------------------------------------</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>     te_pers |        750    .9825288    .0043116   .9717373   .9910768</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>     te_tran |        750    .9503249    .0219938   .8470802   .9945518</span></code></pre></div>
<p>That is it for now.</p>
</div>
</div>


  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>



      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://OlegBadunenko.github.io/" class="external-link">Oleg Badunenko</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

